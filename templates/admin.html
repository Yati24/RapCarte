<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<h1>Admin Panel</h1>

<h2>Users</h2>
<table border="1">
    <tr><th>ID</th><th>Username</th><th>Email</th><th>Country</th><th>City</th><th>date</th><th>Action</th><th>Edit</th></tr>
    {% for user in users %}
    <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.country }}</td>
        <td>{{ user.city }}</td>
        <td>
        {% if user.created_at %}
            {{ user.created_at.strftime('%Y-%m-%d %H:%M:%S') }}
        {% else %}
            N/A
        {% endif %}
        </td>
        <td>
            <a href="{{ url_for('delete_user', user_id=user.id) }}">Supprimer</a>
        </td>
        <td>
            <a href="{{ url_for('edit_user', user_id=user.id) }}">Modifier</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Ajouter un User</h3>
<form method="POST" action="{{ url_for('create_user') }}">
    <input type="text" name="username" placeholder="Username" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="password" name="password" placeholder="Mot de passe" required>
    <input type="text" name="country" placeholder="Pays">
    <input type="text" name="city" placeholder="Ville">
    <button type="submit">Créer</button>
</form>

<hr>

<h2>Rappers</h2>
<table border="1">
    <tr><th>ID</th><th>Nom</th><th>Lat</th><th>Lon</th><th>desc</th><th>spotify</th><th>by</th><th>date</th><th>Action</th><th>Edit</th></tr>
    {% for rapper in rappers %}
    <tr>
        <td>{{ rapper.id }}</td>
        <td>{{ rapper.name }}</td>
        <td>{{ rapper.lat }}</td>
        <td>{{ rapper.lon }}</td>
        <td>{{ rapper.description }}</td>
        <td><a href="{{ rapper.spotify_url }}" target="_blank">Spotify</a></td>
        <td>{{ rapper.creator.username }}</td>
        <td>
        {% if rapper.created_at %}
            {{ rapper.created_at.strftime('%Y-%m-%d %H:%M:%S') }}
        {% else %}
            N/A
        {% endif %}
        </td>
        <td>
            <a href="{{ url_for('delete_rapper', rapper_id=rapper.id) }}">Supprimer</a>
        </td>
        <td>
            <a href="{{ url_for('edit_rapper', rapper_id=rapper.id) }}">Modifier</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Ajouter un Rapper</h3>
<form method="POST" action="{{ url_for('create_rapper') }}">
    <input type="text" name="name" placeholder="Nom" required>
    <input type="text" name="lat" placeholder="Latitude" required>
    <input type="text" name="lon" placeholder="Longitude" required>
    <input type="text" name="description" placeholder="Description">
    <input type="text" name="spotify" placeholder="Spotify URL">
    <button type="submit">Créer</button>
</form>

</body>
</html>
